webpackJsonp([26],{242:function(e,t){function n(e,t){return t=void 0!==t?t:1,"rgba("+e.r+","+e.g+","+e.b+","+t+")"}function o(e){return{background:"linear-gradient(45deg,"+n(e)+" 0%,"+n(e,.7)+" 30%,"+n(e,.3)+" 50%,"+n(e,.1)+" 70%,"+n(e,0)+" 100%)"}}e.exports={createRGBAColor:n,getPropertyMask:o}},669:function(e,t,n){var o=n(304);e.exports=function(e,t,n){var r=t&&t.siteAttrs;r&&e.dispatch("UPDATE_SITE_ATTRS",r);var i={eventName:"adFetch",type:"pageview"},l=t&&t.positions;l&&(i.positions=l.split(",")),e.executeAction(o,i),n&&n()},e.exports.displayName="adsPageviewFetchAction"},677:function(e,t,n){e.exports={controllerViews:{DigestSideRailIndex:n(709)}}},678:function(e,t,n){function o(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}var r=n(4)("DigestSideRailIndex:scrollToDigest"),i=n(71),l=20,s=63,a=s+l;e.exports=function(e){if(r("Show a digest article that has already been loaded",e),e>=0){var t,n=document.getElementById("digest-"+e+"-article");n&&(t=o()+n.getBoundingClientRect().top-a,i(t))}}},709:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,a,u,c="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,d=function(){function e(e,t){for(var n=0;t.length>n;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function(e,t,n){for(var o=!0;o;){var r=e,i=t,l=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=i,n=l,o=!0,s=u=void 0}},f=n(1),h=o(f),y=n(11),g=o(y),m=n(305),v=o(m),b=n(64),k=o(b),x=n(14),w=o(x),R=n(8),B=n(67),$=n(669),P=o($),_=n(71),C=o(_),I=n(2),O=o(I),S=n(242),T=o(S),E=n(3),N=o(E),L=n(52),H=o(L),A=n(678),M=o(A),U=n(10),D=o(U),z=n(39),j=o(z);"undefined"!=typeof window&&(s=window,a=s.document,u=a.documentElement);var F=[],V={$$typeof:c,type:"div",key:null,ref:null,props:{className:"Bgc($brand-mask) StretchedBox H(100%) W(100%)"},_owner:null},K={$$typeof:c,type:R.Icon,key:null,ref:null,props:r(R.Icon.defaultProps,{name:"LogoYahoo",className:"M(a) Pos(a)",width:300,height:250,color:"rgba(0,0,0,.24)"}),_owner:null},W={$$typeof:c,type:v.default,key:null,ref:null,props:r(v.default.defaultProps,{pos:"LREC"}),_owner:null},q=function(e){function t(e,n){i(this,t),p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.store=this.context.getStore(k.default),this._onStoreChange=this._onStoreChange.bind(this),this.calculateHeight=this.calculateHeight.bind(this),this.handleResizeEnd=this.handleResizeEnd.bind(this),this.isInViewport=this.isInViewport.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.subscribers=[],this.state={height:"auto",items:this.store.getItems()||F,currentURL:this.store.getRelativeURL(),adIndex:0}}return l(t,e),d(t,[{key:"isModifiedEvent",value:function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isLeftClickEvent",value:function(e){return 0===e.button}},{key:"getDocHeight",value:function(){return s.innerHeight||u.clientHeight}},{key:"shouldComponentUpdate",value:function(e,t){return(0,D.default)(this,e,t)}},{key:"_onStoreChange",value:function(){this.setState({items:this.state.items,currentURL:this.store.getRelativeURL()})}},{key:"isInViewport",value:function(e){if(!e)return!1;var t=g.default.findDOMNode(this),n={top:t.scrollTop,height:t.offsetHeight,bottom:t.scrollTop+t.offsetHeight},o={top:e.offsetTop,height:e.offsetHeight,bottom:e.offsetTop+e.offsetHeight};if(n.height<o.height){if(o.top>=n.top&&n.bottom>=o.top)return!0}else if(o.top>=n.top&&n.bottom>=o.bottom)return!0;return!1}},{key:"calculateHeight",value:function(e){var t=g.default.findDOMNode(this),n=t.getBoundingClientRect(),o=(e||this.getDocHeight())-n.top-this.props.marginBottom;this.setState({height:o})}},{key:"handleResizeEnd",value:function(e,t){this.calculateHeight(t.resize.height)}},{key:"componentWillUpdate",value:function(e,t){var n=this.state.currentURL,o=t.currentURL}},{key:"componentDidMount",value:function(){this.store.addChangeListener(this._onStoreChange),this.context.executeAction(P.default),this.calculateHeight(),this.subscribers.push((0,j.default)("resizeEnd",this.handleResizeEnd,{resizeInfo:!0}))}},{key:"componentWillUnmount",value:function(){this.store.removeChangeListener(this._onStoreChange);for(var e=0,t=this.subscribers.length;t>e;e++)this.subscribers[e].unsubscribe();this.subscribers=null}},{key:"componentDidUpdate",value:function(){var e=this.store.getIndexByUrl(this.state.currentURL),t=g.default.findDOMNode(this),n=this.refs["digest-"+e],o=this.refs.ad;n&&(this.context.executeAction(P.default),this.isInViewport(n)&&this.isInViewport(o)||(this.context.executeAction(P.default),this.setState({adIndex:e}),C.default.call(t,parseInt(n.offsetTop,10),500)))}},{key:"handleOnClick",value:function(e){if(!this.isModifiedEvent(e)&&this.isLeftClickEvent(e)&&(e.preventDefault(),e.stopPropagation(),this.context.executeAction(H.default,{type:"click",url:e.currentTarget.getAttribute("data-href")}),!this.store.isLoading())){var t=e.currentTarget.getAttribute("href"),n=this.store.getIndexByUrl(t);(0,M.default)(n)}}},{key:"renderItems",value:function(){for(var e=this.state.items,t=[],n=0,o=e.length;o>n;n++){var i=e[n],l=(0,N.default)(i,["images"]),s=(0,N.default)(i,["categories","0","label"],""),a=(0,B.getImageByResolution)(l,"pc:size=square")||(0,B.getImageByResolution)(l,"size=original"),u=(0,N.default)(i,["colors","0"]),d=this.state.currentURL===i.relativeLink,p=n===this.state.items.length-1;t.push(h.default.createElement("div",{className:(0,O.default)("Bgc($c-white-0) Pos(r) P(12px) Bdendc(t) Bdendw(2px) Bdends(s) Bdbs(s) Trsdu(.3s)",{"Bdbw(1px) Bdbc($c-black-4)":!p,"Bdbw(0)":p}),key:i.id,ref:"digest-"+n,style:d?{borderRightColor:T.default.createRGBAColor(u,"0.7")}:{borderRightColor:T.default.createRGBAColor(u,"0")}},{$$typeof:c,type:"a",key:null,ref:null,props:{href:i.link,"data-href":i.relativeLink,className:"StretchedBox Z(1) Cur(p)",onClick:this.handleOnClick},_owner:null},{$$typeof:c,type:"div",key:null,ref:null,props:{children:[{$$typeof:c,type:"div",key:null,ref:null,props:{children:[{$$typeof:c,type:"h3",key:null,ref:null,props:{children:i.title,className:(0,O.default)("M(0) Fz(15px) Mb(8px)",{"Fw(400)":!d})},_owner:null},{$$typeof:c,type:"span",key:null,ref:null,props:{children:s,style:{color:u.hexcode},className:"Fz(11px)"},_owner:null}],className:"Mend(80px) Pend(12px)"},_owner:null},{$$typeof:c,type:"div",key:null,ref:null,props:{children:{$$typeof:c,type:"figure",key:null,ref:null,props:{children:[{$$typeof:c,type:w.default,key:null,ref:null,props:r(w.default.defaultProps,{url:a.url,alt:a.title,width:80,height:80}),_owner:null},V,{$$typeof:c,type:"div",key:null,ref:null,props:{children:[],className:"property-mask StretchedBox H(100%) W(100%) Op(.3)",style:T.default.getPropertyMask(u)},_owner:null}],className:"Pos(r)"},_owner:null},className:"Pos(a) End(0) T(0)"},_owner:null}],className:"Mih(80px) Pos(r)"},_owner:null})),n===this.state.adIndex&&t.push(h.default.createElement("div",{ref:"ad",className:"Bgc(x) H(250px) BdB Pos(r)",key:"ads-"+n},K,W))}return t}},{key:"render",value:function(){return{$$typeof:c,type:"section",key:null,ref:null,props:{children:this.renderItems(),className:"side-index Ovy(a):h Ovy(h) Bd Pos(r) Ovx(h)",style:{height:this.state.height}},_owner:null}}}]),t}(f.Component);q.displayName="DigestSideRailIndex",q.contextTypes={executeAction:f.PropTypes.func.isRequired,getStore:f.PropTypes.func.isRequired},q.propTypes={marginBottom:f.PropTypes.number},q.defaultProps={marginBottom:25},t.default=q,e.exports=t.default}});